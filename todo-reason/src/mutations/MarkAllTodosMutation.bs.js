// Generated by BUCKLESCRIPT VERSION 6.0.3, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("bs-platform/lib/js/curry.js");
var Belt_Array = require("bs-platform/lib/js/belt_Array.js");
var ReasonRelay = require("reason-relay/src/ReasonRelay.bs.js");
var ReasonRelayUtils = require("reason-relay/src/ReasonRelayUtils.bs.js");
var Js_null_undefined = require("bs-platform/lib/js/js_null_undefined.js");
var MarkAllTodosMutation_graphql$MywWebapp = require("../__generated__/MarkAllTodosMutation_graphql.bs.js");

var Mutation = ReasonRelay.MakeCommitMutation(/* module */[/* node */MarkAllTodosMutation_graphql$MywWebapp.node]);

var UseMutation = ReasonRelay.MakeUseMutation(/* module */[/* node */MarkAllTodosMutation_graphql$MywWebapp.node]);

var use = UseMutation[/* use */0];

var commitMutation = Mutation[/* commitMutation */0];

var Mutation$1 = /* module */[
  /* Operation */0,
  /* Mutation */Mutation,
  /* UseMutation */UseMutation,
  /* use */use,
  /* commitMutation */commitMutation
];

function commit(environment, complete, todos, user) {
  return Curry._6(commitMutation, environment, {
              input: {
                clientMutationId: undefined,
                complete: complete,
                userId: user.userId
              }
            }, undefined, {
              markAllTodos: Js_null_undefined.fromOption({
                    changedTodos: Js_null_undefined.fromOption(Belt_Array.keepMap(ReasonRelayUtils.collectConnectionNodes(todos), (function (node) {
                                var match = node.complete !== complete;
                                if (match) {
                                  return {
                                          complete: complete,
                                          id: node.id
                                        };
                                }
                                
                              }))),
                    user: {
                      id: user.id,
                      completedCount: complete ? user.totalCount : 0
                    }
                  })
            }, undefined, /* () */0);
}

exports.Mutation = Mutation$1;
exports.commit = commit;
/* Mutation Not a pure module */
